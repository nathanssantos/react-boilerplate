var L=Object.defineProperty,P=Object.defineProperties;var O=Object.getOwnPropertyDescriptors;var v=Object.getOwnPropertySymbols;var q=Object.prototype.hasOwnProperty,F=Object.prototype.propertyIsEnumerable;var d=(r,t,e)=>t in r?L(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e,b=(r,t)=>{for(var e in t||(t={}))q.call(t,e)&&d(r,e,t[e]);if(v)for(var e of v(t))F.call(t,e)&&d(r,e,t[e]);return r},x=(r,t)=>P(r,O(t));var i=(r,t,e)=>(d(r,typeof t!="symbol"?t+"":t,e),e);import{a as T,m as D,o as h,b as _,g as M,w as N,r as l,c as y,d as B,e as H,f as I,u as V,j as o,G as m,h as p,B as c,P as W,A as j,i as G,T as $,k as R,l as A,n as z,H as K,R as w,p as k,q as Q,s as U,t as J}from"./vendor.e44831ed.js";const X=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const n of a)if(n.type==="childList")for(const u of n.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&s(u)}).observe(document,{childList:!0,subtree:!0});function e(a){const n={};return a.integrity&&(n.integrity=a.integrity),a.referrerpolicy&&(n.referrerPolicy=a.referrerpolicy),a.crossorigin==="use-credentials"?n.credentials="include":a.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function s(a){if(a.ep)return;a.ep=!0;const n=e(a);fetch(a.href,n)}};X();const Y=T.create({baseURL:"https://baseurl.com/",timeout:3e4,validateStatus:r=>r!==401});class Z{constructor(t){i(this,"id",null);i(this,"name",null);i(this,"email",null);if(D(this,{id:h,name:h,email:h}),t==null||t.id==null)throw new Error("Invalid user constructor");const{id:e,name:s,email:a}=t;this.id=e,this.name=s||"",this.email=a||""}}class ee{constructor(){i(this,"user",null);i(this,"status","unauthenticated");i(this,"authenticate",async t=>{try{const{email:e,password:s,mock:a}=t;if(a)return console.log({email:e,password:s}),this.status="authenticated",!0;this.status="pending";const n=await M().post("/auth",{email:e,password:s}),{data:u,status:S}=n;return S!==200||!u?(this.unauthenticate(),{error:{status:S}}):(this.user=new Z(u),this.status="authenticated",!0)}catch(e){return this.unauthenticate(),{error:e}}});_(this)}get isAuthenticated(){return this.status==="authenticated"}get isFetching(){return this.status==="pending"}unauthenticate(){this.status="unauthenticated",this.user=null}}class te{constructor(){i(this,"authStore",null)}init(){this.authStore=new ee}}async function re(){return N({RootStore:te,env:Y})}const C=l.exports.createContext({}),ae=C.Provider,g=()=>l.exports.useContext(C),E="Campo obrigat\xF3rio",oe="E-mail inv\xE1lido",ne="M\xEDnimo de 6 digitos",f={schema:{email:y().email(oe).required(E),password:y().required(E).min(6,ne)},initialValues:{email:"test@email.com",password:"123456"}};f.validationSchema=B().shape(f.schema);var se={login:f};H({});const{login:{initialValues:ie,validationSchema:ue}}=se,le=()=>{const r=g();l.exports.useState(!1);const e=V({initialValues:ie,validationSchema:ue,enableReinitialize:!0,onSubmit:async s=>{const a=await z(r.authStore.authenticate(x(b({},s),{mock:!0})));(a==null?void 0:a.error)&&alert("Login Error")}});return o(m,{container:!0,component:"main",sx:{height:"100vh"},children:p(c,{component:"form",noValidate:!0,onSubmit:e.handleSubmit,style:{pointerEvents:e.isSubmitting?"none":"initial"},display:"flex",flex:"1",children:[o(m,{item:!0,xs:!1,sm:4,md:7,sx:{backgroundImage:"url(https://source.unsplash.com/random)",backgroundRepeat:"no-repeat",backgroundColor:s=>s.palette.mode==="light"?s.palette.grey[50]:s.palette.grey[900],backgroundSize:"cover",backgroundPosition:"center"}}),o(m,{item:!0,xs:12,sm:8,md:5,component:W,elevation:6,square:!0,children:p(c,{sx:{my:8,mx:4,display:"flex",flexDirection:"column",alignItems:"center"},children:[o(j,{sx:{m:1,bgcolor:"secondary.main"},children:o(G,{})}),o($,{component:"h1",variant:"h5",children:"Sign in"}),p(c,{sx:{mt:1},children:[o(R,{id:"email",label:"Email Address",name:"email",autoComplete:"email",margin:"normal",required:!0,fullWidth:!0,autoFocus:!0,value:e.values.email,error:e.touched.email&&!!e.errors.email,helperText:e.touched.email&&e.errors.email,onChange:e.handleChange}),o(R,{id:"password",label:"Password",name:"password",margin:"normal",required:!0,fullWidth:!0,autoFocus:!0,value:e.values.password,error:e.touched.password&&!!e.errors.password,helperText:e.touched.password&&e.errors.password,onChange:e.handleChange,autoComplete:"current-password"}),o(A,{fullWidth:!0,variant:"contained",sx:{mt:3,mb:2},onClick:e.handleSubmit,children:"Sign In"})]})]})})]})})};var ce=I(le);const de=()=>{const r=g();return o(c,{padding:4,children:o(A,{variant:"contained",onClick:()=>{r.authStore.unauthenticate()},children:"Sign Out"})})},he=()=>{var t;const r=g();return o(K,{children:((t=r==null?void 0:r.authStore)==null?void 0:t.isAuthenticated)?o(w,{children:o(k,{path:"/",element:o(de,{})})}):o(w,{children:o(k,{path:"/",element:o(ce,{})})})})};var me=I(he);Q.node.isRequired;const pe=()=>{const[r,t]=l.exports.useState(!1),[e,s]=l.exports.useState(null),a=async()=>{try{const n=await re();s(n)}catch(n){console.error(n)}finally{t(!0)}};return l.exports.useEffect(()=>{a()},[]),r?o(ae,{value:e,children:o(me,{})}):null};U.render(o(J.StrictMode,{children:o(pe,{})}),document.getElementById("root"));
