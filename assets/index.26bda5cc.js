var P=Object.defineProperty,T=Object.defineProperties;var O=Object.getOwnPropertyDescriptors;var S=Object.getOwnPropertySymbols;var q=Object.prototype.hasOwnProperty,F=Object.prototype.propertyIsEnumerable;var h=(r,t,e)=>t in r?P(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e,y=(r,t)=>{for(var e in t||(t={}))q.call(t,e)&&h(r,e,t[e]);if(S)for(var e of S(t))F.call(t,e)&&h(r,e,t[e]);return r},b=(r,t)=>T(r,O(t));var i=(r,t,e)=>(h(r,typeof t!="symbol"?t+"":t,e),e);import{a as D,m as _,o as m,b as M,g as N,w as B,r as u,c as x,d as H,e as V,f as E,u as W,j as o,G as p,h as c,B as d,P as j,A as G,i as $,T as z,k as R,l as I,n as K,H as Q,R as w,p as C,q as U,s as J,C as X,t as Y,v as Z}from"./vendor.65c52f23.js";const ee=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const s of a)if(s.type==="childList")for(const l of s.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function e(a){const s={};return a.integrity&&(s.integrity=a.integrity),a.referrerpolicy&&(s.referrerPolicy=a.referrerpolicy),a.crossorigin==="use-credentials"?s.credentials="include":a.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(a){if(a.ep)return;a.ep=!0;const s=e(a);fetch(a.href,s)}};ee();const te=D.create({baseURL:"https://baseurl.com/",timeout:3e4,validateStatus:r=>r!==401});class re{constructor(t){i(this,"id",null);i(this,"name",null);i(this,"email",null);if(_(this,{id:m,name:m,email:m}),t==null||t.id==null)throw new Error("Invalid user constructor");const{id:e,name:n,email:a}=t;this.id=e,this.name=n||"",this.email=a||""}}class ae{constructor(){i(this,"user",null);i(this,"status","unauthenticated");i(this,"authenticate",async t=>{try{const{email:e,password:n,mock:a}=t;if(a)return console.log({email:e,password:n}),this.status="authenticated",!0;this.status="pending";const s=await N().post("/auth",{email:e,password:n}),{data:l,status:v}=s;return v!==200||!l?(this.unauthenticate(),{error:{status:v}}):(this.user=new re(l),this.status="authenticated",!0)}catch(e){return this.unauthenticate(),{error:e}}});M(this)}get isAuthenticated(){return this.status==="authenticated"}get isFetching(){return this.status==="pending"}unauthenticate(){this.status="unauthenticated",this.user=null}}class oe{constructor(){i(this,"authStore",null)}init(){this.authStore=new ae}}async function se(){return B({RootStore:oe,env:te})}const A=u.exports.createContext({}),ne=A.Provider,g=()=>u.exports.useContext(A),k="Campo obrigat\xF3rio",ie="E-mail inv\xE1lido",le="M\xEDnimo de 6 digitos",f={schema:{email:x().email(ie).required(k),password:x().required(k).min(6,le)},initialValues:{email:"test@email.com",password:"123456"}};f.validationSchema=H().shape(f.schema);var ue={login:f};const ce=V({}),{login:{initialValues:de,validationSchema:he}}=ue,me=()=>{const r=g();u.exports.useState(!1);const e=W({initialValues:de,validationSchema:he,enableReinitialize:!0,onSubmit:async n=>{const a=await K(r.authStore.authenticate(b(y({},n),{mock:!0})));(a==null?void 0:a.error)&&alert("Login Error")}});return o(p,{container:!0,component:"main",sx:{height:"100vh"},children:c(d,{component:"form",noValidate:!0,onSubmit:e.handleSubmit,style:{pointerEvents:e.isSubmitting?"none":"initial"},display:"flex",flex:"1",children:[o(p,{item:!0,xs:!1,sm:4,md:7,sx:{backgroundImage:"url(https://source.unsplash.com/random)",backgroundRepeat:"no-repeat",backgroundColor:n=>n.palette.mode==="light"?n.palette.grey[50]:n.palette.grey[900],backgroundSize:"cover",backgroundPosition:"center"}}),o(p,{item:!0,xs:12,sm:8,md:5,component:j,elevation:6,square:!0,children:c(d,{sx:{my:8,mx:4,display:"flex",flexDirection:"column",alignItems:"center"},children:[o(G,{sx:{m:1,bgcolor:"secondary.main"},children:o($,{})}),o(z,{component:"h1",variant:"h5",children:"Sign in"}),c(d,{sx:{mt:1},children:[o(R,{id:"email",label:"Email Address",name:"email",autoComplete:"email",margin:"normal",required:!0,fullWidth:!0,autoFocus:!0,value:e.values.email,error:e.touched.email&&!!e.errors.email,helperText:e.touched.email&&e.errors.email,onChange:e.handleChange}),o(R,{id:"password",label:"Password",name:"password",margin:"normal",required:!0,fullWidth:!0,autoFocus:!0,value:e.values.password,error:e.touched.password&&!!e.errors.password,helperText:e.touched.password&&e.errors.password,onChange:e.handleChange,autoComplete:"current-password"}),o(I,{fullWidth:!0,variant:"contained",sx:{mt:3,mb:2},onClick:e.handleSubmit,children:"Sign In"})]})]})})]})})};var pe=E(me);const fe=()=>{const r=g();return o(d,{padding:4,children:o(I,{variant:"contained",onClick:()=>{r.authStore.unauthenticate()},children:"Sign Out"})})},ge=()=>{var t;const r=g();return o(Q,{children:((t=r==null?void 0:r.authStore)==null?void 0:t.isAuthenticated)?o(w,{children:o(C,{path:"/",element:o(fe,{})})}):o(w,{children:o(C,{path:"/",element:o(pe,{})})})})};var ve=E(ge);const L=({children:r})=>c(J,{theme:ce,children:[o(X,{}),r]});L.propTypes={children:U.node.isRequired};const Se=()=>{const[r,t]=u.exports.useState(!1),[e,n]=u.exports.useState(null),a=async()=>{try{const s=await se();n(s)}catch(s){console.error(s)}finally{t(!0)}};return u.exports.useEffect(()=>{a()},[]),r?o(ne,{value:e,children:o(L,{children:o(ve,{})})}):null};Y.render(o(Z.StrictMode,{children:o(Se,{})}),document.getElementById("root"));
